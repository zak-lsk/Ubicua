<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SISDOGAR - Menú Principal</title>
  <link rel="stylesheet" href="css/styles.css">
  <script>
    function verificarEstadoAlarma() {
        fetch("/alarmaModal", { method: "GET" })
            .then(response => response.json())
            .then(data => {
                if (data.alarmaActivada && data.movimientoDetectado) {
                    console.log("Movimiento detectado. Redirigiendo a la página de seguridad...");
                    window.location.href = "/seguridad.html"; // Redirige a la página de seguridad
                }
            })
            .catch(error => console.error("Error al verificar el estado de la alarma:", error));
    }

    // Verifica el estado cada 5 segundos
    setInterval(verificarEstadoAlarma, 5000);
  </script>
</head>
<body>
  <div class="menu">
    <h1>SISDOGAR</h1>
    <button onclick="location.href='temperatura.html'">Temperatura</button>
    <button onclick="location.href='lluvia.html'">Lluvia</button>
    <button onclick="location.href='seguridad.html'">Seguridad</button>
  </div>
</body>
</html>
